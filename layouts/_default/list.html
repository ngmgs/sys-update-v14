{{- define "main" }}

{{- if .Content }}
<div class="post-content">
  {{- .Content -}}
</div>
{{- end }}

<header class="page-header">
  <h1>{{ .Title }}</h1>
</header>

{{- $pages := .Paginator.Pages }}
{{- range $index, $page := $pages }}
<article class="post-entry" style="position: relative; height: auto !important; overflow: visible !important;">
  <header class="entry-header">
    <h2>{{ $page.Title }}</h2>
  </header>
  
  <div class="entry-content" style="max-height: none !important; overflow: visible !important; display: block !important;">
    
    {{/* --- ç”»åƒã‚¨ãƒªã‚¢ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ãƒ¡ãƒ«ã‚«ãƒªã¸ï¼‰ --- */}}
    {{- if $page.Params.cover.image }}
      <div style="margin-bottom: 15px; position: relative; z-index: 2; display: block; aspect-ratio: 4 / 3; width: 100%; max-width: 400px; background-color: #f0f0f0; border-radius: 8px; overflow: hidden;">
        <a href="{{ $page.Params.item_url | default $page.Permalink }}" 
           target="_blank" 
           rel="nofollow sponsored" 
           style="display: block; width: 100%; height: 100%;">
          <img src="{{ $page.Params.cover.image | absURL }}" 
               alt="{{ $page.Title }}" 
               {{ if eq $index 0 }}
                 fetchpriority="high"
               {{ else }}
                 loading="lazy"
                 decoding="async"
               {{ end }}
               style="width: 100%; height: 100%; object-fit: cover;">
        </a>
      </div>
    {{- end }}

    <p style="overflow: visible !important;">{{ $page.Description }}</p>

    {{/* --- [åè»¢] ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’èª­ã‚€ãŸã‚ã®ãƒœã‚¿ãƒ³ --- */}}
    <div style="margin-top: 15px; position: relative; z-index: 10;">
      <a href="{{ $page.Permalink }}" 
         style="display: inline-block; background-color: #f5f5f5; border: 1px solid #ddd; border-radius: 6px; padding: 8px 16px; text-decoration: none; color: #555; font-size: 0.9em; font-weight: bold;">
        ğŸ“– ã“ã®ãƒšãƒ¼ã‚¸ã§è©³ç´°ã‚’èª­ã‚€
      </a>
    </div>
  </div>

  <footer class="entry-footer">
    {{ $page.Date.Format "2006-01-02 15:04" }}
  </footer>

  {{/* --- [åè»¢] å…¨ä½“ãƒªãƒ³ã‚¯ï¼ˆé€æ˜ãªã‚«ãƒãƒ¼ï¼‰ï¼šãƒ¡ãƒ«ã‚«ãƒªã¸é£›ã¶ --- */}}
  <a class="entry-link" 
     aria-label="ãƒ¡ãƒ«ã‚«ãƒªã§ {{ $page.Title }} ã‚’è¦‹ã‚‹" 
     href="{{ $page.Params.item_url | default $page.Permalink }}"
     target="_blank"
     rel="nofollow sponsored"
     style="position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1;">
  </a>

</article>
{{- end }}

{{- if gt .Paginator.TotalPages 1 }}
<footer class="page-footer">
  <nav class="pagination">
    {{- if .Paginator.HasPrev }}
    <a class="prev" href="{{ .Paginator.Prev.URL | absURL }}">Â« Prev</a>
    {{- end }}
    {{- if .Paginator.HasNext }}
    <a class="next" href="{{ .Paginator.Next.URL | absURL }}">Next Â»</a>
    {{- end }}
  </nav>
</footer>
{{- end }}

{{- end }}